# OS Lab Project

这是一个仿照 xv6 编写的操作系统项目，包含从 Lab 1 到 Lab 7 以及扩展实验的完整实现。该项目旨在帮助理解操作系统的核心概念，包括内存管理、中断处理、进程调度、文件系统等。

## 项目结构

本项目按实验阶段划分为不同的目录，每个目录代表操作系统开发的一个阶段：

- **lab1**: 最小内核启动与串口输出
- **lab2**: 格式化输出与控制台增强
- **lab3**: 内存管理（分页与虚拟内存）
- **lab4**: 中断与陷阱处理
- **lab5**: 进程管理与调度基础
- **lab6**: 系统调用实现
- **lab7**: 文件系统实现
- **extend_lab**: 扩展实验（多级反馈队列调度算法等）

## 环境要求

在运行本项目之前，请确保您的开发环境已安装以下工具：

1.  **QEMU RISC-V 模拟器**: 用于运行操作系统内核。
    -   命令: `qemu-system-riscv64`
2.  **RISC-V 交叉编译工具链**: 用于编译内核代码。
    -   命令: `riscv64-unknown-elf-gcc`, `riscv64-unknown-elf-ld` 等
3.  **Make**: 构建自动化工具。

## 如何运行

每个实验目录都是独立的，您可以进入相应的目录进行编译和运行。

### 编译并运行

以 `extend_lab` 为例：

1.  打开终端并进入实验目录：
    ```bash
    cd extend_lab
    ```

2.  使用 Make 命令编译并启动 QEMU：
    ```bash
    make qemu
    ```
    
    这将编译内核源代码生成 `kernel.elf`，并在 QEMU 模拟器中启动该内核。

### 清理构建文件

如果需要清理编译生成的中间文件和可执行文件，请运行：

```bash
make clean
```

## 调试

本项目支持使用 GDB 对内核进行调试。

1.  在一个终端窗口中运行以下命令，启动 QEMU 并等待 GDB 连接：
    ```bash
    make qemu-gdb
    ```

2.  打开另一个终端窗口，进入相同的目录，运行以下命令启动 GDB：
    ```bash
    make gdb
    ```
    或者，如果您的系统配置需要 `gdb-multiarch`：
    ```bash
    make gdb-multi
    ```

## 实验详情

每个实验目录下都有对应的说明文档（如 `lab1/lab1.md`），详细记录了该阶段的实验目标、实现步骤和思考。建议在进行或查看代码时结合这些文档阅读。
